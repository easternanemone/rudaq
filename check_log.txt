warning: unexpected `cfg` condition value: `storage_arrow`
   --> crates/daq-core/src/core.rs:401:7
    |
401 | #[cfg(feature = "storage_arrow")]
    |       ^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = note: expected values for `feature` are: `schemars`
    = help: consider adding `storage_arrow` as a feature in `Cargo.toml`
    = note: see <https://doc.rust-lang.org/nightly/rustc/check-cfg/cargo-specifics.html> for more information about checking conditional configuration
    = note: `#[warn(unexpected_cfgs)]` on by default

warning: unexpected `cfg` condition value: `storage_arrow`
   --> crates/daq-core/src/core.rs:734:7
    |
734 | #[cfg(feature = "storage_arrow")]
    |       ^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = note: expected values for `feature` are: `schemars`
    = help: consider adding `storage_arrow` as a feature in `Cargo.toml`
    = note: see <https://doc.rust-lang.org/nightly/rustc/check-cfg/cargo-specifics.html> for more information about checking conditional configuration

warning: use of deprecated struct `core::DataPoint`: Use Measurement enum instead
   --> crates/daq-core/src/core.rs:753:12
    |
753 | ...ar(DataPoint),
    |       ^^^^^^^^^
    |
    = note: `#[warn(deprecated)]` on by default

warning: use of deprecated struct `core::DataPoint`: Use Measurement enum instead
   --> crates/daq-core/src/core.rs:753:12
    |
753 | ...ar(DataPoint),
    |       ^^^^^^^^^

warning: use of deprecated field `core::DataPoint::timestamp`: Use Measurement enum instead
   --> crates/daq-core/src/core.rs:764:33
    |
764 | ...=> dp.timestamp,
    |       ^^^^^^^^^^^^

warning: use of deprecated field `core::DataPoint::channel`: Use Measurement enum instead
   --> crates/daq-core/src/core.rs:773:34
    |
773 | ...> &dp.channel,
    |       ^^^^^^^^^^

warning: use of deprecated field `core::DataPoint::unit`: Use Measurement enum instead
   --> crates/daq-core/src/core.rs:782:34
    |
782 | ...> &dp.unit,
    |       ^^^^^^^

warning: use of deprecated field `core::DataPoint::metadata`: Use Measurement enum instead
   --> crates/daq-core/src/core.rs:791:33
    |
791 | ...=> dp.metadata.as...
    |       ^^^^^^^^^^^

warning: `daq-core` (lib) generated 8 warnings
    Checking rust_daq v0.1.0 (/Users/briansquires/code/rust-daq/crates/rust-daq)
error[E0428]: the name `config` is defined multiple times
  --> crates/rust-daq/src/lib.rs:39:1
   |
38 | pub mod config;
   | --------------- previous definition of the module `config` here
39 | pub mod config;
   | ^^^^^^^^^^^^^^^ `config` redefined here
   |
   = note: `config` must be defined only once in the type namespace of this module

warning: unused import: `crate::observable::ParameterSet`
  --> crates/rust-daq/src/data/hdf5_writer.rs:18:5
   |
18 | use crate::observable::ParameterSet;
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = note: `#[warn(unused_imports)]` on by default

warning: implementation of an `unsafe` trait
   --> crates/rust-daq/src/data/ring_buffer.rs:176:1
    |
176 | unsafe impl Send for RingBuffer {}
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = note: requested on the command line with `-W unsafe-code`

warning: implementation of an `unsafe` trait
   --> crates/rust-daq/src/data/ring_buffer.rs:181:1
    |
181 | unsafe impl Sync for RingBuffer {}
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: usage of an `unsafe` block
   --> crates/rust-daq/src/data/ring_buffer.rs:241:24
    |
241 |           let mut mmap = unsafe {
    |  ________________________^
242 | |             MmapOptions::new()
243 | |                 .map_mut(&file)
244 | |                 .context("Failed to create memory mapping")?
245 | |         };
    | |_________^

warning: usage of an `unsafe` block
   --> crates/rust-daq/src/data/ring_buffer.rs:252:9
    |
252 | /         unsafe {
253 | |             // Write header fields
254 | |             (*header).magic = MAGIC;
255 | |             (*header).capacity_bytes = capacity_bytes as u64;
...   |
271 | |             (*header)._padding.fill(0);
272 | |         }
    | |_________^

warning: usage of an `unsafe` block
   --> crates/rust-daq/src/data/ring_buffer.rs:277:24
    |
277 |         let data_ptr = unsafe { mmap.as_mut_ptr().add(HEADER_SIZE) };
    |                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: usage of an `unsafe` block
   --> crates/rust-daq/src/data/ring_buffer.rs:306:24
    |
306 |           let mut mmap = unsafe {
    |  ________________________^
307 | |             MmapOptions::new()
308 | |                 .map_mut(&file)
309 | |                 .context("Failed to map ring buffer file")?
310 | |         };
    | |_________^

warning: usage of an `unsafe` block
   --> crates/rust-daq/src/data/ring_buffer.rs:316:33
    |
316 |         let (magic, capacity) = unsafe { ((*header).magic, (*header).capacity_bytes) };
    |                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: usage of an `unsafe` block
   --> crates/rust-daq/src/data/ring_buffer.rs:329:24
    |
329 |         let data_ptr = unsafe { mmap.as_mut_ptr().add(HEADER_SIZE) };
    |                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: usage of an `unsafe` block
   --> crates/rust-daq/src/data/ring_buffer.rs:380:9
    |
380 | /         unsafe {
381 | |             debug_assert!(HEADER_SIZE + self.capacity as usize <= self.mmap.len());
382 | |             debug_assert!(data.len() <= self.capacity as usize);
...   |
424 | |             (*self.header).write_epoch.fetch_add(1, Ordering::Release);
425 | |         }
    | |_________^

warning: usage of an `unsafe` block
   --> crates/rust-daq/src/data/ring_buffer.rs:558:13
    |
558 | /             unsafe {
559 | |                 debug_assert!(HEADER_SIZE + self.capacity as usize <= self.mmap.len());
...   |
639 | |             }
    | |_____________^

warning: usage of an `unsafe` block
   --> crates/rust-daq/src/data/ring_buffer.rs:732:9
    |
732 |         unsafe { (*self.header).stream_id.load(Ordering::Acquire) }
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: usage of an `unsafe` block
   --> crates/rust-daq/src/data/ring_buffer.rs:741:9
    |
741 |         unsafe { (*self.header).magic }
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: usage of an `unsafe` block
   --> crates/rust-daq/src/data/ring_buffer.rs:751:9
    |
751 |         unsafe { (*self.header).write_epoch.load(Ordering::Acquire) }
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: usage of an `unsafe` block
   --> crates/rust-daq/src/data/ring_buffer.rs:793:9
    |
793 |         unsafe { (*self.header).write_head.load(Ordering::Acquire) }
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: usage of an `unsafe` block
   --> crates/rust-daq/src/data/ring_buffer.rs:839:9
    |
839 |         unsafe { (*self.header).read_tail.load(Ordering::Acquire) }
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: usage of an `unsafe` block
   --> crates/rust-daq/src/data/ring_buffer.rs:847:9
    |
847 | /         unsafe {
848 | |             (*self.header).read_tail.store(new_tail, Ordering::Release);
849 | |         }
    | |_________^

warning: usage of an `unsafe` block
   --> crates/rust-daq/src/data/ring_buffer.rs:858:9
    |
858 | /         unsafe {
859 | |             (*self.header).read_tail.fetch_add(bytes, Ordering::Release);
860 | |         }
    | |_________^

warning: unused import: `async_trait::async_trait`
  --> crates/rust-daq/src/measurement/mod.rs:41:5
   |
41 | use async_trait::async_trait;
   |     ^^^^^^^^^^^^^^^^^^^^^^^^

warning: use of deprecated struct `scripting::engine::ScriptHost`: Use RhaiEngine instead. See docs/guides/scripting/migration_v4_to_v5.md
  --> crates/rust-daq/src/scripting/engine.rs:78:6
   |
78 | impl ScriptHost {
   |      ^^^^^^^^^^
   |
   = note: `#[warn(deprecated)]` on by default

warning: use of deprecated field `scripting::engine::ScriptHost::engine`: Use RhaiEngine instead. See docs/guides/scripting/migration_v4_to_v5.md
   --> crates/rust-daq/src/scripting/engine.rs:105:16
    |
105 |         Self { engine, runtime }
    |                ^^^^^^

warning: use of deprecated field `scripting::engine::ScriptHost::runtime`: Use RhaiEngine instead. See docs/guides/scripting/migration_v4_to_v5.md
   --> crates/rust-daq/src/scripting/engine.rs:105:24
    |
105 |         Self { engine, runtime }
    |                        ^^^^^^^

warning: use of deprecated field `scripting::engine::ScriptHost::engine`: Use RhaiEngine instead. See docs/guides/scripting/migration_v4_to_v5.md
   --> crates/rust-daq/src/scripting/engine.rs:154:16
    |
154 |         Self { engine, runtime }
    |                ^^^^^^

warning: use of deprecated field `scripting::engine::ScriptHost::runtime`: Use RhaiEngine instead. See docs/guides/scripting/migration_v4_to_v5.md
   --> crates/rust-daq/src/scripting/engine.rs:154:24
    |
154 |         Self { engine, runtime }
    |                        ^^^^^^^

warning: use of deprecated field `scripting::engine::ScriptHost::engine`: Use RhaiEngine instead. See docs/guides/scripting/migration_v4_to_v5.md
   --> crates/rust-daq/src/scripting/engine.rs:185:9
    |
185 |         self.engine.eval_with_scope(&mut scope, script)
    |         ^^^^^^^^^^^

warning: use of deprecated field `scripting::engine::ScriptHost::engine`: Use RhaiEngine instead. See docs/guides/scripting/migration_v4_to_v5.md
   --> crates/rust-daq/src/scripting/engine.rs:211:9
    |
211 |         self.engine.compile(script)?;
    |         ^^^^^^^^^^^

warning: use of deprecated field `scripting::engine::ScriptHost::engine`: Use RhaiEngine instead. See docs/guides/scripting/migration_v4_to_v5.md
   --> crates/rust-daq/src/scripting/engine.rs:232:14
    |
232 |         &mut self.engine
    |              ^^^^^^^^^^^

warning: variable does not need to be mutable
  --> crates/rust-daq/src/hardware/mock.rs:64:13
   |
64 |         let mut position = Self::attach_stage_callbacks(position, position_state.clone(), 10.0);
   |             ----^^^^^^^^
   |             |
   |             help: remove this `mut`
   |
   = note: `#[warn(unused_mut)]` on by default

warning: variable does not need to be mutable
  --> crates/rust-daq/src/hardware/mock.rs:87:13
   |
87 |         let mut position = Self::attach_stage_callbacks(position, position_state.clone(), 10.0);
   |             ----^^^^^^^^
   |             |
   |             help: remove this `mut`

warning: variable does not need to be mutable
   --> crates/rust-daq/src/hardware/mock.rs:110:13
    |
110 |         let mut position =
    |             ----^^^^^^^^
    |             |
    |             help: remove this `mut`

warning: variable does not need to be mutable
   --> crates/rust-daq/src/hardware/mock.rs:296:29
    |
296 |                         let mut flag_for_task = streaming_flag.clone();
    |                             ----^^^^^^^^^^^^^
    |                             |
    |                             help: remove this `mut`

For more information about this error, try `rustc --explain E0428`.
warning: `rust_daq` (lib) generated 31 warnings
error: could not compile `rust_daq` (lib) due to 1 previous error; 31 warnings emitted
